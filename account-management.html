<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Management System - Account Management</title>
    <link rel="stylesheet" href="css/account-management.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="header-left">
            <button class="home-btn">Home</button>
            <div class="system-name">Key Management System</div>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Search staff...">
            <button><i class="fas fa-search"></i></button>
        </div>
    </header>
    
    <aside>
        <div class="sidebar-header">
            <h2>Menu</h2>
        </div>
        <ul class="sidebar-menu">
           <li><a href="svdashboard.html" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="house.html"><i class="fas fa-home"></i> Register House</a></li>
            <li><a href="guest.html"><i class="fas fa-user"></i> Register Guest</a></li>
            <li><a href="kms-homepage.html"><i class="fas fa-key"></i> Key Management</a></li>
            <li><a href="assignment-details.html"><i class="fas fa-tasks"></i> Assignment</a></li>
            <li><a href="maintenance.html"><i class="fas fa-tools"></i> Maintenance</a></li>
            <li><a href="inspection.html"><i class="fas fa-clipboard-check"></i> Inspection</a></li>
            <li><a href="report.html"><i class="fas fa-chart-bar"></i> Report</a></li>
            <li><a href="account-management.html"><i class="fas fa-user-cog"></i> Account Management</a></li>
        </ul>
    </aside>
    
    <main>
        <div class="account-container">
            <div class="page-header">
                <h1 class="page-title"><i class="fas fa-user-cog"></i> Staff Accounts</h1>
                <div class="action-buttons">
                    <button class="action-btn new-staff-btn" id="newStaffBtn">
                        <i class="fas fa-plus"></i> New Staff
                    </button>
                </div>
            </div>
            
            <table class="staff-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Staff Name</th>
                        <th>Staff ID</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Staff" class="staff-avatar"></td>
                        <td>Michael Johnson</td>
                        <td>STF-001</td>
                        <td>michael.johnson@example.com</td>
                        <td>(555) 123-4567</td>
                        <td><span class="role-badge role-supervisor">Supervisor</span></td>
                        <td class="staff-actions">
                            <button class="table-btn edit-btn" onclick="editStaff('STF-001')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="table-btn delete-btn" onclick="deleteStaff('STF-001')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td><img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Staff" class="staff-avatar"></td>
                        <td>Sarah Williams</td>
                        <td>STF-002</td>
                        <td>sarah.williams@example.com</td>
                        <td>(555) 234-5678</td>
                        <td><span class="role-badge role-staff">Staff</span></td>
                        <td class="staff-actions">
                            <button class="table-btn edit-btn" onclick="editStaff('STF-002')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="table-btn delete-btn" onclick="deleteStaff('STF-002')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td><img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Staff" class="staff-avatar"></td>
                        <td>David Wilson</td>
                        <td>STF-003</td>
                        <td>david.wilson@example.com</td>
                        <td>(555) 345-6789</td>
                        <td><span class="role-badge role-admin">Admin</span></td>
                        <td class="staff-actions">
                            <button class="table-btn edit-btn" onclick="editStaff('STF-003')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="table-btn delete-btn" onclick="deleteStaff('STF-003')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td><img src="https://randomuser.me/api/portraits/women/28.jpg" alt="Staff" class="staff-avatar"></td>
                        <td>Emily Davis</td>
                        <td>STF-004</td>
                        <td>emily.davis@example.com</td>
                        <td>(555) 456-7890</td>
                        <td><span class="role-badge role-staff">Staff</span></td>
                        <td class="staff-actions">
                            <button class="table-btn edit-btn" onclick="editStaff('STF-004')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="table-btn delete-btn" onclick="deleteStaff('STF-004')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <!-- Staff Account Modal -->
    <div class="modal" id="staffModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle"><i class="fas fa-user-plus"></i> New Staff Account</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="staffAccountForm">
                    <input type="hidden" id="staffId">
                    
                    <div class="avatar-upload">
                        <img id="avatarPreview" src="https://via.placeholder.com/80" alt="Avatar Preview" class="avatar-preview">
                        <div>
                            <button type="button" class="upload-btn">
                                <i class="fas fa-camera"></i> Upload Photo
                            </button>
                            <p style="font-size: 12px; color: #666; margin-top: 5px;">JPG, PNG max 2MB</p>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="staffName">Full Name</label>
                            <input type="text" id="staffName" placeholder="Enter staff full name" required>
                        </div>
                        <div class="form-group">
                            <label for="staffIdInput">Staff ID</label>
                            <input type="text" id="staffIdInput" placeholder="Auto-generated" readonly>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" placeholder="Enter email address" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" placeholder="Enter phone number" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="role">Role</label>
                            <select id="role" required>
                                <option value="">Select Role</option>
                                <option value="staff">Staff</option>
                                <option value="supervisor">Supervisor</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="joinDate">Join Date</label>
                            <input type="date" id="joinDate" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">Notes</label>
                        <input type="text" id="notes" placeholder="Any additional information">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="action-btn cancel-btn" onclick="closeModal()">Cancel</button>
                <button type="button" class="action-btn save-btn" onclick="saveStaff()">Save Account</button>
            </div>
        </div>
    </div>

    <script>
        // Current staff being edited
        let currentStaff = null;
        
        // Open modal for new staff
        document.getElementById('newStaffBtn').addEventListener('click', function() {
            currentStaff = null;
            document.getElementById('modalTitle').innerHTML = '<i class="fas fa-user-plus"></i> New Staff Account';
            document.getElementById('staffAccountForm').reset();
            document.getElementById('staffId').value = '';
            document.getElementById('staffIdInput').value = 'STF-' + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('avatarPreview').src = 'https://via.placeholder.com/80';
            document.getElementById('joinDate').valueAsDate = new Date();
            openModal('staffModal');
        });
        
        // Edit staff function
        function editStaff(staffId) {
            // In a real app, this would fetch staff data from server
            const staffData = {
                'STF-001': {
                    name: 'Michael Johnson',
                    email: 'michael.johnson@example.com',
                    phone: '(555) 123-4567',
                    role: 'supervisor',
                    joinDate: '2022-01-15',
                    notes: 'Head supervisor',
                    avatar: 'https://randomuser.me/api/portraits/men/32.jpg'
                },
                'STF-002': {
                    name: 'Sarah Williams',
                    email: 'sarah.williams@example.com',
                    phone: '(555) 234-5678',
                    role: 'staff',
                    joinDate: '2022-03-22',
                    notes: 'Front desk',
                    avatar: 'https://randomuser.me/api/portraits/women/44.jpg'
                },
                'STF-003': {
                    name: 'David Wilson',
                    email: 'david.wilson@example.com',
                    phone: '(555) 345-6789',
                    role: 'admin',
                    joinDate: '2021-11-05',
                    notes: 'System administrator',
                    avatar: 'https://randomuser.me/api/portraits/men/67.jpg'
                },
                'STF-004': {
                    name: 'Emily Davis',
                    email: 'emily.davis@example.com',
                    phone: '(555) 456-7890',
                    role: 'staff',
                    joinDate: '2022-05-18',
                    notes: 'Maintenance coordinator',
                    avatar: 'https://randomuser.me/api/portraits/women/28.jpg'
                }
            };
            
            currentStaff = staffId;
            const staff = staffData[staffId];
            
            document.getElementById('modalTitle').innerHTML = `<i class="fas fa-user-edit"></i> Edit Staff ${staffId}`;
            document.getElementById('staffId').value = staffId;
            document.getElementById('staffIdInput').value = staffId;
            document.getElementById('staffName').value = staff.name;
            document.getElementById('email').value = staff.email;
            document.getElementById('phone').value = staff.phone;
            document.getElementById('role').value = staff.role;
            document.getElementById('joinDate').value = staff.joinDate;
            document.getElementById('notes').value = staff.notes;
            document.getElementById('avatarPreview').src = staff.avatar;
            
            openModal('staffModal');
        }
        
        // Delete staff function
        function deleteStaff(staffId) {
            if (confirm(`Are you sure you want to delete staff ${staffId}? This action cannot be undone.`)) {
                // In a real app, this would delete from server
                alert(`Staff ${staffId} has been deleted.`);
                // Refresh the staff list
            }
        }
        
        // Save staff function
        function saveStaff() {
            const form = document.getElementById('staffAccountForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const staffId = document.getElementById('staffId').value;
            const isNew = !staffId;
            
            // In a real app, this would save to server
            if (isNew) {
                alert('New staff account created successfully!');
            } else {
                alert(`Staff ${staffId} updated successfully!`);
            }
            
            closeModal();
            // Refresh the staff list
        }
        
        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('staffModal').style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.className === 'modal') {
                closeModal();
            }
        });
        
        // Avatar upload simulation
        document.querySelector('.upload-btn').addEventListener('click', function() {
            // In a real app, this would open a file dialog
            alert('In a real application, this would open a file dialog to select an image.');
            // For demo purposes, we'll just change the avatar
            const randomGender = Math.random() > 0.5 ? 'men' : 'women';
            const randomId = Math.floor(Math.random() * 100);
            document.getElementById('avatarPreview').src = `https://randomuser.me/api/portraits/${randomGender}/${randomId}.jpg`;
        });
    </script>
</body>
<style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    display: grid;
    grid-template-columns: 250px 1fr;
    grid-template-rows: 80px 1fr;
    height: 100vh;
    background-color: #f5f5f5;
}

/* Header Styles */
header {
    grid-column: 2 / 3;
    grid-row: 1 / 2;
    background-color: rgb(90, 90, 90);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    padding: 0 30px;
    justify-content: space-between;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 20px;
}

.home-btn {
    background-color: rgb(255, 165, 0);
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s;
}

.home-btn:hover {
    background-color: rgba(255, 165, 0, 0.8);
}

.system-name {
    font-size: 24px;
    font-weight: bold;
    color: white;
}

.search-bar {
    display: flex;
    align-items: center;
}

.search-bar input {
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    width: 300px;
    outline: none;
}

.search-bar button {
    background-color: rgb(255, 165, 0);
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 0 5px 5px 0;
    margin-left: -5px;
    cursor: pointer;
}

/* Sidebar Styles */
aside {
    grid-column: 1 / 2;
    grid-row: 1 / 3;
    background-color: rgb(90, 90, 90);
    box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    padding: 20px 0;
}

.sidebar-header {
    padding: 0 20px 20px;
    border-bottom: 1px solid rgb(120, 120, 120);
    margin-bottom: 20px;
}

.sidebar-header h2 {
    color: white;
    font-size: 20px;
}

.sidebar-menu {
    list-style: none;
}

.sidebar-menu li {
    margin-bottom: 5px;
}

.sidebar-menu a {
    display: block;
    padding: 12px 20px;
    color: white;
    text-decoration: none;
    transition: all 0.3s;
}

.sidebar-menu a i {
    margin-right: 10px;
    color: rgb(255, 165, 0);
}

.sidebar-menu a:hover, .sidebar-menu a.active {
    background-color: rgba(255, 255, 255, 0.1);
    color: rgb(255, 165, 0);
    border-left: 4px solid rgb(255, 165, 0);
}

/* Main Content Styles */
main {
    grid-column: 2 / 3;
    grid-row: 2 / 3;
    padding: 30px;
    overflow-y: auto;
}

/* Account Management Page Styles */
.account-container {
    background-color: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.page-title {
    color: rgb(255, 165, 0);
    font-size: 24px;
}

.action-buttons {
    display: flex;
    gap: 15px;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.new-staff-btn {
    background-color: rgb(255, 165, 0);
    color: white;
}

.new-staff-btn:hover {
    background-color: rgba(255, 165, 0, 0.8);
}

/* Staff Table Styles */
.staff-table {
    width: 100%;
    border-collapse: collapse;
}

.staff-table th, 
.staff-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

.staff-table th {
    background-color: rgb(90, 90, 90);
    color: white;
    font-weight: 600;
    position: sticky;
    top: 0;
}

.staff-table tr:hover {
    background-color: #f9f9f9;
}

.staff-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.staff-actions {
    display: flex;
    gap: 10px;
}

.table-btn {
    padding: 5px 10px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 12px;
}

.edit-btn {
    background-color: #fff7e6;
    color: #fa8c16;
}

.delete-btn {
    background-color: #fff1f0;
    color: #f5222d;
}

.role-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
}

.role-supervisor {
    background-color: #f6ffed;
    color: #52c41a;
    border: 1px solid #b7eb8f;
}

.role-staff {
    background-color: #e6f7ff;
    color: #1890ff;
    border: 1px solid #91d5ff;
}

.role-admin {
    background-color: #fff0f6;
    color: #eb2f96;
    border: 1px solid #ffadd2;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: white;
    border-radius: 8px;
    width: 600px;
    max-width: 90%;
    padding: 25px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.modal-title {
    color: rgb(255, 165, 0);
    font-size: 20px;
}

.close-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #999;
}

.modal-body {
    max-height: 70vh;
    overflow-y: auto;
    padding: 10px 0;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
}

/* Form Styles */
.form-row {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
}

.form-group {
    flex: 1;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #444;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 16px;
}

.avatar-upload {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.avatar-preview {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #ddd;
}

.upload-btn {
    background-color: #f0f0f0;
    color: #333;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.cancel-btn {
    background-color: #f0f0f0;
    color: #333;
}

.save-btn {
    background-color: rgb(255, 165, 0);
    color: white;
}

</style>
</html>